<ui:composition
        template="/templates/layout/private/main-layout.xhtml"
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        xmlns:f="http://java.sun.com/jsf/core">
     <f:metadata>
     	<f:viewAction action="#{myBillsPage.test}"/>
     </f:metadata>   
	<ui:define name="head">
		<title>My Bills</title>
	</ui:define>
	<ui:define name="header">
		<div class="jumbotron">
		        <div class="container">
		          <h1><h:outputText value="#{myBillsPage.pageTitle}"/></h1>
		          <div>View your past and current bills. Contains useful insight on spending.</div>
		        </div>
		    </div>
	</ui:define>
	<ui:define name="content">
	<h:form id="myBillForm">
	<div class="row">
		 <div class="col-lg-12 col-md-12 col-sm-12">
		 	<p:messages id="messages"/>
		 </div>
	</div>
	<div class="row">
	        <div class="col-lg-12 col-md-12 col-sm-12">
	        	<!-- <h2>June 2019 - Bill Summary</h2> -->
	        	<p>Donec id elit non mi justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
	        	  <p:schedule value="#{myBillsPage.lazyEventModel}" id="myschedule">
	        	  	  <p:ajax event="dateSelect" listener="#{myBillsPage.onDateSelect}" update="eventDetails" oncomplete="PF('eventDialog').show();" />
		              <p:ajax event="eventSelect" listener="#{myBillsPage.onEventSelect}" update="eventDetails" oncomplete="PF('eventDialog').show();" />
		              <p:ajax event="eventMove" listener="#{myBillsPage.onEventMove}" update="messages" />
		              <p:ajax event="eventResize" listener="#{myBillsPage.onEventResize}" update="messages" />
		              <p:ajax event="viewChange" listener="#{myBillsPage.onViewChange}"  />
	        	  </p:schedule>
	            <p>Break down of your bills for the month by <span style="color:blue;font-weight:bold;"><h:outputText id="typeInfo" value="type"/></span></p>
	            <p:tooltip for="typeInfo">Monthly, Weekly</p:tooltip>
	            
	            <!-- <p:dataTable id="myBillsTable"
	            			 styleClass="table table-dark"
	            			 value="#{myBillsPage.myBills}"
	            			 var="bill"
	            			 reflow="true"
	            			 sortBy="#{bill.month}">
	            	
	            	<p:column headerText="Type">
	            		<h:outputText styleClass="proper-case" value="#{bill.cycleType}LY"/>
	            	</p:column>
	            	<p:column headerText="Year">
	            		<h:outputText value="#{bill.year}"/>
	            	</p:column>
	            	<p:column headerText="Start">
	            		<h:outputText value="#{bill.startDate}">
	            			 <f:convertDateTime pattern="MM/dd/yyyy" />
	            		</h:outputText>
	            	</p:column>
	            	<p:column headerText="End">
	            		<h:outputText value="#{bill.endDate}">
	            			<f:convertDateTime pattern="MM/dd/yyyy" />
	            		</h:outputText>
	            	</p:column>
	            	<p:column headerText="Billed">
	            		<h:outputText value="#{bill.totalBilled}">
	            			<f:convertNumber currencySymbol = "$" type = "currency" />
	            		</h:outputText>
	            	</p:column>
	            	<p:column headerText="Status">
	            		<h:outputText value="#{bill.status}"/>
	            	</p:column>
	            	
	            </p:dataTable> -->
	        </div>
	</div>
	<hr/>
	 <div class="row">
	        <div class="col-lg-6 col-md-6 col-sm-12">
	            <h2>June 2019 - Bill Types</h2> 
	            <p>Donec id elit non mi justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
	            <p:donutChart model="#{myBillsPage.typeDonutModel}" style="width: 100%; height: 500px;">
	            	 <p:autoUpdate/>
	            </p:donutChart>
	        </div>
	        <div class="col-lg-6 col-md-6 col-sm-12">
	            <h2>June 2019 - Bill Categories</h2> 
	            <p>Donec id elit non mi justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
	            <p:donutChart id="categoryDonut" model="#{myBillsPage.categoryDonutModel}" style="width: 100%; height: 500px;">
	            <p:autoUpdate/>
	            </p:donutChart>
	        </div>
    	</div>
    	<hr/>
		 <div class="row">
	        <div class="col-lg-12 col-md-12 col-sm-12">
	            <h2>Current Bill Items</h2>
	            <p>Donec id elit non mi justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
	            <p:dataTable id="myBillItemsTable"
	            			 styleClass="table table-dark"
	            			 value="#{myBillsPage.myBillItems}"
	            			 var="billItem"
	            			 rendered="false"
	            			 reflow="true">
	            	<p:column headerText="ID">
	            		<h:outputText value="#{billItem.id}"/>
	            	</p:column>		 
	            	<p:column headerText="Type">
	            		<h:outputText value="#{billItem.recurringCode}LY"/>
	            	</p:column>
	            	<p:column headerText="Category">
	            		<h:outputText value="#{billItem.typeCode}"/>
	            	</p:column>
	            	<p:column headerText="Name">
	            		<h:outputText value="#{billItem.name}"/>
	            	</p:column>
	            	<p:column headerText="Billed">
	            		<h:outputText value="#{billItem.billedAmount}">
	            			<f:convertNumber currencySymbol = "$" type = "currency" />
	            		</h:outputText>
	            	</p:column>
	            	<p:column headerText="Paid">
	            		<h:outputText value="#{billItem.paidAmount}">
	            			<f:convertNumber currencySymbol = "$" type = "currency" />
	            		</h:outputText>
	            	</p:column>
	            	<p:column headerText="Balance">
	            		<h:outputText value="#{billItem.billedAmount - billItem.paidAmount}">
	            			<f:convertNumber currencySymbol = "$" type = "currency" />
	            		</h:outputText>
	            	</p:column>
	            	<p:column headerText="Due Date">
	            		<h:outputText value="#{billItem.dateDue}">
	            			 <f:convertDateTime pattern="MM/dd/yyyy" />
	            		</h:outputText>
	            	</p:column>
	            	<p:column headerText="Time Due">
	            		<h:outputText value="#{billItem.timeDue}">
	            			 <f:convertDateTime pattern="hh:mm a" />
	            		</h:outputText>
	            	</p:column>
	            	<p:column headerText="Status">
	            		<h:outputText value="#{billItem.status}"/>
	            	</p:column>
	            </p:dataTable>
	        </div>
    	</div>
    	<hr/>
		 <div class="row">
	        <div class="col-lg-3 col-md-12 col-sm-12">
	            <h2>Bill History</h2>
	            <p>Donec id elit non mi justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
	        </div>
	        <div class="col-lg-9 col-md-12 col-sm-12">
	            <h2>Bill Summaries</h2>
	            <p>Donec id elit non mi justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
	          
	        </div>
    	</div>
    	<hr/>
    	 <p:dialog widgetVar="eventDialog" header="Event Details" showEffect="clip" hideEffect="clip">
        <h:panelGrid id="eventDetails" columns="2">
            <p:outputLabel for="title" value="Titles:" />
            <p:inputText id="title" value="#{myBillsPage.event.title}" required="true" />
 
            <p:outputLabel for="from" value="From:" />
            <p:calendar id="from" value="#{myBillsPage.event.startDate}" timeZone="GMT+2" pattern="dd/MM/yyyy HH:mm"/>
 
            <p:outputLabel for="to" value="To:" />
            <p:calendar id="to" value="#{myBillsPage.event.endDate}" timeZone="GMT+2" pattern="dd/MM/yyyy HH:mm"/>
 
            <p:outputLabel for="allDay" value="All Day:" />
            <h:selectBooleanCheckbox id="allDay" value="#{myBillsPage.event.allDay}" />
 
            <p:commandButton type="reset" value="Reset" />
            <p:commandButton id="addButton" value="Save" action="#{myBillsPage.addEvent}" oncomplete="PF('myschedule').update();PF('eventDialog').hide();" />
        </h:panelGrid>
    </p:dialog>    
    </h:form>	
	</ui:define>
</ui:composition>